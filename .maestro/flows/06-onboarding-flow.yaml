appId: app.lizzie
name: "[Onboarding] - New User Lizard Registration"
tags:
  - smoke
  - regression
  - onboarding
---
# =====================================================
# 온보딩 플로우 테스트
# 신규 사용자가 로그인 후 도마뱀을 등록하는 시나리오
# =====================================================

# 앱 시작 (깨끗한 상태)
- stopApp

- launchApp:
    clearState: true

# 애니메이션 완료 대기
- waitForAnimationToEnd:
    timeout: 5000

# =====================================================
# 1. 로그인 화면 확인
# =====================================================

- assertVisible:
    id: "login-screen"

- assertVisible:
    id: "login-mock-button"

# 스크린샷 - 로그인 전
- takeScreenshot: "06-login-screen"

# Mock 로그인 수행 (도마뱀 등록 건너뛰기)
# NOTE: Mock 로그인은 도마뱀 데이터를 주입하므로, 실제 온보딩 테스트를 위해서는
# 별도 Mock API 또는 clearState 후 Google OAuth 필요
# 현재는 온보딩 화면 진입 및 폼 작성 테스트만 수행

- tapOn:
    id: "login-mock-button"

- waitForAnimationToEnd:
    timeout: 5000

# =====================================================
# 2. 홈 화면 진입 확인 (Mock 로그인은 도마뱀 데이터 포함)
# =====================================================

# Mock 로그인 시 이미 도마뱀이 등록되어 있으므로 홈 화면으로 이동
- assertVisible:
    id: "home-screen"

# 스크린샷 - 홈 화면
- takeScreenshot: "06-home-after-login"

# =====================================================
# 3. 설정에서 도마뱀 정보 편집 화면 진입 (온보딩 폼과 동일)
# =====================================================

# 프로필 카드의 편집 버튼 탭
- tapOn:
    id: "edit-lizard-button"

- waitForAnimationToEnd:
    timeout: 3000

# 도마뱀 정보 폼 확인 (온보딩과 동일한 UI)
- assertVisible:
    text: "이름"

- assertVisible:
    text: "종류"

- assertVisible:
    text: "생년월"

- assertVisible:
    text: "성별"

- assertVisible:
    text: "성격"

# 스크린샷 - 도마뱀 정보 폼
- takeScreenshot: "06-lizard-form"

# =====================================================
# 4. 폼 필드 확인 및 상호작용 테스트
# =====================================================

# 이름 필드 확인
- assertVisible:
    text: "리치"

# 저장 버튼 확인 (변경사항 없으므로 비활성화 상태일 수 있음)
- assertVisible:
    text: "저장하기"

# 스크린샷 - 최종
- takeScreenshot: "06-onboarding-final"

# 뒤로가기
- back

- waitForAnimationToEnd:
    timeout: 3000

# 홈 화면 복귀 확인
- assertVisible:
    id: "home-screen"

# =====================================================
# NOTE: 실제 온보딩 플로우 테스트
# =====================================================
# Mock 로그인은 도마뱀 데이터를 자동 주입하므로,
# 실제 "도마뱀 미등록 → 온보딩 화면" 플로우를 테스트하려면:
# 1. 실제 Google OAuth 사용 (Maestro 제약으로 어려움)
# 2. 별도 Mock API로 도마뱀 미등록 상태 구현
# 3. 온보딩 화면 직접 진입 테스트 (app/(auth)/onboarding.tsx)
#
# 현재는 온보딩 폼 UI가 도마뱀 정보 편집 화면과 동일하므로,
# 편집 화면 진입으로 폼 동작을 검증합니다.
